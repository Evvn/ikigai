
<h1>Welcome, <%= current_user.firstname%> <%= current_user.lastname%></h1>
<img src="<%= current_user.profile_url%>" alt="">
<div><a href="/users/<%=current_user.id%>/edit">edit profile</a> |
<a href="/">back to explore</a></div>


<h2><%=current_user.firstname%>, find a Mentor!</h2>
<br>
<div class="container">
    <h3> Direct requests you have sent: </h3>
    <div class="request">
      <% @sent_requests.each do |m|%>
        <%if m.mentor_id%>
        <p>title: <%= m.title%></p>
        <p>message: <%= m.request_message%></p>
        <p>time: <%= m.created_at%></p>
        <p>to: <%= User.find(m.mentor_id).firstname %></p>
        <p>status: <%= m.request_status%></p>
   
        <a href="/requests/1/edit">edit request</a>
    </div>
</div>

    <%if m.request_status == 'accepted'%>
      <%= form_for m, method: :put do |f| %>
        <p>contact: <%=User.find(m.mentor_id).email%></p>
        <%=f.submit 'archived'%>
      <%end%> 
    <%else%>
      <%= form_for m, method: :delete do |f| %>
        <button>delete</button>
      <%end%>
    <%end%>
  <%end%>
<%end%>



<div class="container">
  <h3> General requests you have sent, based on what you want to learn: </h3>
  <div class="request">
  <% @sent_requests.each do |m|%>
      <%if m.mentor_id ==nil%>
          <p>subject: <%= m.title%></p> 
          <p>category: <%= m.category %></p>
          <p>message: <%= m.request_message%></p>
          <p>time: <%= m.created_at%></p>
          <p>status: <%= m.request_status%></p>

          <%= form_for m, method: :delete do |f| %>
            <button>delete</button>
          <%end%>      
      <%end%>
    </div>
  <%end%>
</div>



<div class="container">
  <h2><%=current_user.firstname%> will you be my Mentor?</h2>
  <h3> Direct requests to review:</h3>
  <div class="request">
    <% @received_requests.each do |m|%>
    <p>title: <%= m.title%></p> 
    <p>category: <%= m.category %></p>
    <p>message: <%= m.request_message%></p>
    <p>time: <%= m.created_at%></p>
    

    <%= form_for m, method: :put do |f| %>
      <%=f.submit 'accepted'%>
      <%=f.submit 'declined'%>
    <%end%> 
  </div>

<%end%>
</div>
<br>
<div class="container">
  <h3> General requests based on your skills: </h3>
  <div class="request">
    <% @mentor_categories.each do |c| %>
      <p>category:  <%=c%></p>
      <%@requests = Request.where(category: c).current%>
      <%@requests.each do |r|%>
        <%if r.user_id != current_user.id%>
          From: <%=r.title%>
          <%=r.user.firstname%>
          <%= form_for r, method: :put do |f| %>
            <%=f.submit 'accepted'%>
          <%end%> 
        <%end%>
      <%end%>
    <%end%>
  </div>
</div>


